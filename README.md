# ECLF-SPEC / Классификатор эмоций по транскрибированному тексту
## Структура файлов
finaly work.py - Файл с итоговым решением куда необходимо передать файл с транскрибацией и аудио файл
json2list.py - Файл с функцией для превращения json в список всего текста (texts)
TextRecogModel.py - Файл с функцией для взаимодействия с моделью rubert для классификации текста
AudioModel.py - Файл с функцией для взаимодействия с моделью aniemore для классификации аудио
requirements.txt - Файл со всеми библиотеками
## Инструкция по запуску/тестированию
1) Установите python
2) Выполните комманду pip install -r /path/to/requirements.txt
3) Подайте на вход функции emotion_recognition (файл finaly work.py) аудио файл и json файл
4) результат будет возвращен в формате текста из варинтов "Red Light" / "Green Light"
## Техническая документация (finaly work)
### Функция emotion_recognition(audio, json):
 - на вход данной функции должен поступать аудио в формате wav или aac, а так-же json-файл с транскрибацией
 - Json-файл отправляется в функцию json_to_list где превращается в текст
   - Этот текст отправляется в функцию text_recognition
 - аудио-файл отправляется в функцию audio_recognition
 - с помощью условия суммируют возвраты обоих моделей, умножаются на свои веса, после чего возвращается Green Light если их сумма > -0.5, в противном случае - Green Light
## Техническая документация (json2list)
### Функция json_to_list(json):
 - на вход данной функции поступает json-file из транскрибированного аудио
 - из транскрибированного аудио отбирается только текст
 - текст передается в список texts и возвращается
## Техническая документация (TextRecogModel)
### Функция json_to_list(json, weight):
 - на вход данной функции подается список texts и константа веса (важности нейронной сети, в изначальном варианте это 0.2)
 - список обрабатывается с помощью функции get_sentiment (функция модели rubert) которая возвращает либо label либо score
 - в зависимости от label значения суммируются где (негатив -1, нейтралитет 0, позитив 1) и делется на сумму чисел
 - результат формулы возвращается из функциии
## Техническая документация (AudioModel)
### audio_recognition(audio, weight):
 - на вход данной функции подается аудио-файл формата wav или aac и константа веса (важности нейронной сети, в изначальном варианте это 0.8)
 - если файл не aac происходит преобразование в wav
 - файл поступает в predict, в зависимости от предикта выставляется значение count (anger&disgust -1, fear&sadness -0.5, neutral&enthusiasm 0, happiness 1)
 - результат преобразования (count) умножается на вес и возвращается
### Функция predict(audio):
 - на вход данной функции поступает аудио-файл формата aac
 - модель (aniemore recognition) обрабатывает файл и возвращает одну из эмоций, после чего ей присваивается значение (anger&disgust -1, fear&sadness -0.5, neutral&enthusiasm 0, happiness 1)
 - возвращается значение

